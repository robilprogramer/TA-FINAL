<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arsitektur Sistem Chatbot RAG - YPI Al-Azhar Jakarta</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(180deg, #f1f5f9 0%, #e2e8f0 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        
        .main-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 100px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            padding: 40px 50px;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -100px;
            right: -100px;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(59,130,246,0.2) 0%, transparent 70%);
            border-radius: 50%;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: -150px;
            left: -100px;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(16,185,129,0.15) 0%, transparent 70%);
            border-radius: 50%;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        .header h1 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -0.5px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 400;
        }
        
        .header-badges {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }
        
        /* Layer Section Base */
        .layer-section {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            position: relative;
        }
        
        .layer-section:last-of-type {
            border-bottom: none;
        }
        
        .layer-sidebar {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            padding: 25px 16px;
            font-weight: 700;
            font-size: 0.75rem;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 55px;
            color: white;
            position: relative;
        }
        
        .layer-number {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%) rotate(180deg);
            background: rgba(255,255,255,0.2);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 800;
        }
        
        .layer-content {
            flex: 1;
            padding: 35px 40px;
        }
        
        /* Layer Colors */
        .layer-presentation .layer-sidebar { background: linear-gradient(180deg, #6366f1 0%, #4f46e5 100%); }
        .layer-presentation .layer-content { background: linear-gradient(135deg, #eef2ff 0%, #e0e7ff 100%); }
        
        .layer-application .layer-sidebar { background: linear-gradient(180deg, #3b82f6 0%, #2563eb 100%); }
        .layer-application .layer-content { background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); }
        
        .layer-rag .layer-sidebar { background: linear-gradient(180deg, #8b5cf6 0%, #7c3aed 100%); }
        .layer-rag .layer-content { background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%); }
        
        .layer-database .layer-sidebar { background: linear-gradient(180deg, #ec4899 0%, #db2777 100%); }
        .layer-database .layer-content { background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%); }
        
        .layer-processing .layer-sidebar { background: linear-gradient(180deg, #f59e0b 0%, #d97706 100%); }
        .layer-processing .layer-content { background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%); }
        
        .layer-ingestion .layer-sidebar { background: linear-gradient(180deg, #10b981 0%, #059669 100%); }
        .layer-ingestion .layer-content { background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); }
        
        /* Section Title */
        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }
        
        .section-title h3 {
            font-size: 1rem;
            font-weight: 700;
            color: #1e293b;
        }
        
        .section-desc {
            font-size: 0.8rem;
            color: #64748b;
            line-height: 1.6;
            margin-bottom: 25px;
            max-width: 900px;
        }
        
        /* Flow Container */
        .flow-container {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .flow-vertical {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        /* Components */
        .component {
            background: white;
            border-radius: 14px;
            padding: 18px 22px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
            min-width: 130px;
        }
        
        .component:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }
        
        .component-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .component-title {
            font-weight: 600;
            font-size: 0.8rem;
            color: #1e293b;
            margin-bottom: 4px;
        }
        
        .component-subtitle {
            font-size: 0.68rem;
            color: #64748b;
            line-height: 1.4;
        }
        
        /* Special Component Styles */
        .component-highlight {
            border-color: #8b5cf6;
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
        }
        
        .component-primary {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        
        .component-success {
            border-color: #10b981;
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
        }
        
        .component-warning {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }
        
        .component-danger {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
        }
        
        .component-dark {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-color: #334155;
            color: white;
        }
        
        .component-dark .component-title,
        .component-dark .component-subtitle {
            color: white;
        }
        
        .component-dark .component-subtitle {
            opacity: 0.8;
        }
        
        /* Arrow */
        .arrow {
            font-size: 1.5rem;
            color: #94a3b8;
            font-weight: 300;
        }
        
        .arrow-down {
            font-size: 1.3rem;
            color: #94a3b8;
        }
        
        .arrow-bidirectional {
            font-size: 1.3rem;
            color: #94a3b8;
        }
        
        /* Process Group */
        .process-group {
            background: rgba(255,255,255,0.8);
            border: 2px dashed #cbd5e1;
            border-radius: 14px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .process-group-title {
            font-size: 0.65rem;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .mini-process {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 8px 14px;
            font-size: 0.72rem;
            color: #475569;
            text-align: center;
            display: flex;
            align-items: center;
            gap: 6px;
            justify-content: center;
        }
        
        /* Database Icon */
        .db-component {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        
        .db-icon-wrapper {
            width: 80px;
            height: 85px;
            border-radius: 12px 12px 35% 35%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
        }
        
        .db-icon-wrapper::before {
            content: '';
            position: absolute;
            top: 6px;
            left: 6px;
            right: 6px;
            height: 18px;
            background: rgba(255,255,255,0.2);
            border-radius: 6px 6px 50% 50%;
        }
        
        .db-chromadb {
            background: linear-gradient(180deg, #10b981 0%, #047857 100%);
        }
        
        .db-postgresql {
            background: linear-gradient(180deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .db-icon-wrapper .db-emoji {
            font-size: 1.6rem;
            margin-top: 10px;
        }
        
        .db-icon-wrapper .db-name {
            font-size: 0.7rem;
            font-weight: 700;
            margin-top: 2px;
        }
        
        .db-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: #475569;
        }
        
        /* Chunks */
        .chunks-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .chunk-item {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 7px 14px;
            font-size: 0.68rem;
            color: #6b7280;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        /* Embeddings */
        .embedding-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .embedding-item {
            background: linear-gradient(90deg, #d1fae5 0%, #a7f3d0 100%);
            border: 1px solid #6ee7b7;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 0.6rem;
            color: #065f46;
            font-family: 'Courier New', monospace;
        }
        
        /* Interface Cards */
        .interface-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        
        .interface-card {
            background: white;
            border-radius: 12px;
            padding: 18px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .interface-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }
        
        .interface-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .interface-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 6px;
        }
        
        .interface-desc {
            font-size: 0.68rem;
            color: #64748b;
            line-height: 1.4;
        }
        
        /* Modes Section */
        .modes-section {
            margin-top: 30px;
            padding-top: 25px;
            border-top: 2px dashed #c7d2fe;
        }
        
        .modes-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modes-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .mode-card {
            border-radius: 16px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }
        
        .mode-card::before {
            content: '';
            position: absolute;
            top: -30px;
            right: -30px;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            opacity: 0.15;
        }
        
        .mode-informational {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 2px solid #10b981;
        }
        
        .mode-informational::before { background: #10b981; }
        
        .mode-transactional {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
        }
        
        .mode-transactional::before { background: #f59e0b; }
        
        .mode-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            color: white;
        }
        
        .mode-informational .mode-badge { background: #10b981; }
        .mode-transactional .mode-badge { background: #f59e0b; }
        
        .mode-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .mode-informational .mode-title { color: #065f46; }
        .mode-transactional .mode-title { color: #92400e; }
        
        .mode-desc {
            font-size: 0.75rem;
            color: #64748b;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        .mode-features {
            list-style: none;
            margin-bottom: 15px;
        }
        
        .mode-features li {
            font-size: 0.75rem;
            padding: 6px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #475569;
        }
        
        .mode-features li::before {
            content: '‚úì';
            font-weight: bold;
            font-size: 0.7rem;
        }
        
        .mode-informational .mode-features li::before { color: #10b981; }
        .mode-transactional .mode-features li::before { color: #f59e0b; }
        
        .mode-flow {
            background: rgba(255,255,255,0.6);
            border-radius: 10px;
            padding: 12px;
        }
        
        .mode-flow-title {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .mode-informational .mode-flow-title { color: #059669; }
        .mode-transactional .mode-flow-title { color: #d97706; }
        
        .mode-flow-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            align-items: center;
        }
        
        .flow-step {
            background: white;
            padding: 5px 10px;
            border-radius: 6px;
            font-size: 0.65rem;
            font-weight: 500;
            box-shadow: 0 2px 6px rgba(0,0,0,0.06);
        }
        
        .flow-arrow {
            color: #94a3b8;
            font-size: 0.7rem;
        }
        
        /* Integration Box */
        .integration-box {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            padding: 20px 25px;
            margin-top: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .integration-icon {
            font-size: 2.5rem;
        }
        
        .integration-content {
            flex: 1;
        }
        
        .integration-title {
            font-weight: 700;
            font-size: 0.9rem;
            color: #1e293b;
            margin-bottom: 5px;
        }
        
        .integration-desc {
            font-size: 0.78rem;
            color: #64748b;
            line-height: 1.5;
        }
        
        /* Legend */
        .legend {
            padding: 25px 50px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }
        
        .legend-title {
            font-weight: 700;
            font-size: 0.85rem;
            color: #1e293b;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.78rem;
            color: #64748b;
        }
        
        .legend-color {
            width: 22px;
            height: 22px;
            border-radius: 6px;
            flex-shrink: 0;
        }
        
        /* Footer */
        .footer {
            background: #f8fafc;
            padding: 30px 50px;
            text-align: center;
            border-top: 1px solid #e2e8f0;
        }
        
        .footer-main {
            font-weight: 700;
            font-size: 0.95rem;
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .footer-sub {
            font-size: 0.85rem;
            color: #64748b;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .interface-grid { grid-template-columns: repeat(2, 1fr); }
            .modes-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .flow-container { justify-content: center; }
            .interface-grid { grid-template-columns: 1fr; }
        }
        
        @media print {
            body { background: white; padding: 0; }
            .main-container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1>Arsitektur Sistem Chatbot Berbasis LLM dengan RAG</h1>
                <p>Yayasan Pesantren Islam (YPI) Al-Azhar Jakarta</p>
                <div class="header-badges">
                    <span class="badge">üìê BAB III - Metodologi Penelitian</span>
                    <span class="badge">üèóÔ∏è Microservices Architecture</span>
                    <span class="badge">6Ô∏è‚É£ Layered Design</span>
                </div>
            </div>
        </div>

        <!-- LAYER 1: PRESENTATION LAYER -->
        <div class="layer-section layer-presentation">
            <div class="layer-sidebar">
                Presentation Layer
                <span class="layer-number">1</span>
            </div>
            <div class="layer-content">
                <div class="section-title">
                    <span style="font-size: 1.3rem;">üñ•Ô∏è</span>
                    <h3>Presentation Layer</h3>
                </div>
                <div class="section-desc">
                    Chat interface untuk interaksi user-chatbot, document management interface, bulk review system untuk knowledge base, dan progress tracking untuk pendaftaran siswa.
                </div>
                
                <div class="interface-grid">
                    <div class="interface-card">
                        <div class="interface-icon">üí¨</div>
                        <div class="interface-title">Chat Interface</div>
                        <div class="interface-desc">Antarmuka percakapan interaktif untuk pengguna berinteraksi dengan chatbot</div>
                    </div>
                    <div class="interface-card">
                        <div class="interface-icon">üìÇ</div>
                        <div class="interface-title">Document Management</div>
                        <div class="interface-desc">Interface pengelolaan dokumen knowledge base untuk admin</div>
                    </div>
                    <div class="interface-card">
                        <div class="interface-icon">üìã</div>
                        <div class="interface-title">Bulk Review System</div>
                        <div class="interface-desc">Sistem review massal untuk verifikasi dan validasi knowledge base</div>
                    </div>
                    <div class="interface-card">
                        <div class="interface-icon">üìä</div>
                        <div class="interface-title">Progress Tracking</div>
                        <div class="interface-desc">Dashboard pelacakan status pendaftaran siswa secara real-time</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAYER 2: APPLICATION LAYER -->
        <div class="layer-section layer-application">
            <div class="layer-sidebar">
                Application Layer
                <span class="layer-number">2</span>
            </div>
            <div class="layer-content">
                <div class="section-title">
                    <span style="font-size: 1.3rem;">‚öôÔ∏è</span>
                    <h3>Application Layer</h3>
                </div>
                <div class="section-desc">
                    FastAPI backend dengan REST API endpoints, business logic untuk intent classification (informational vs transactional), session management dan conversation history.
                </div>
                
                <div class="flow-container">
                    <div class="component component-primary">
                        <div class="component-icon">üöÄ</div>
                        <div class="component-title">FastAPI Backend</div>
                        <div class="component-subtitle">REST API Endpoints</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-highlight">
                        <div class="component-icon">üéØ</div>
                        <div class="component-title">Intent Classification</div>
                        <div class="component-subtitle">Informational vs<br/>Transactional</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component">
                        <div class="component-icon">üíº</div>
                        <div class="component-title">Business Logic</div>
                        <div class="component-subtitle">Core Processing</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component">
                        <div class="component-icon">üîê</div>
                        <div class="component-title">Session Manager</div>
                        <div class="component-subtitle">User Sessions</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component">
                        <div class="component-icon">üìú</div>
                        <div class="component-title">Conversation History</div>
                        <div class="component-subtitle">Chat Memory</div>
                    </div>
                </div>
                
                <!-- Modes Section -->
                <div class="modes-section">
                    <div class="modes-title">
                        <span>üîÄ</span> Dua Mode Layanan Chatbot
                    </div>
                    
                    <div class="modes-grid">
                        <!-- Mode Informational -->
                        <div class="mode-card mode-informational">
                            <div class="mode-badge">üü¢ Mode 1</div>
                            <div class="mode-title">
                                <span>‚ÑπÔ∏è</span> Mode Informational
                            </div>
                            <div class="mode-desc">
                                Layanan tanya jawab berbasis knowledge base untuk menjawab pertanyaan pengguna secara otomatis.
                            </div>
                            <ul class="mode-features">
                                <li>Menjawab pertanyaan umum tentang YPI Al-Azhar</li>
                                <li>Informasi biaya pendidikan per jenjang</li>
                                <li>Prosedur dan persyaratan pendaftaran</li>
                                <li>Fasilitas dan program sekolah</li>
                            </ul>
                            <div class="mode-flow">
                                <div class="mode-flow-title">Alur Proses:</div>
                                <div class="mode-flow-steps">
                                    <span class="flow-step">Query</span>
                                    <span class="flow-arrow">‚Üí</span>
                                    <span class="flow-step">RAG Retrieval</span>
                                    <span class="flow-arrow">‚Üí</span>
                                    <span class="flow-step">LLM</span>
                                    <span class="flow-arrow">‚Üí</span>
                                    <span class="flow-step">Response</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Mode Transactional -->
                        <div class="mode-card mode-transactional">
                            <div class="mode-badge">üü† Mode 2</div>
                            <div class="mode-title">
                                <span>üìù</span> Mode Transactional
                            </div>
                            <div class="mode-desc">
                                Layanan pendaftaran siswa baru secara interaktif dengan panduan bertahap.
                            </div>
                            <ul class="mode-features">
                                <li>Panduan pendaftaran interaktif step-by-step</li>
                                <li>Pengumpulan data siswa dan orang tua</li>
                                <li>Upload dokumen persyaratan</li>
                                <li>Tracking status pendaftaran real-time</li>
                            </ul>
                            <div class="mode-flow">
                                <div class="mode-flow-title">Alur Proses:</div>
                                <div class="mode-flow-steps">
                                    <span class="flow-step">Welcome</span>
                                    <span class="flow-arrow">‚Üí</span>
                                    <span class="flow-step">Data</span>
                                    <span class="flow-arrow">‚Üí</span>
                                    <span class="flow-step">Upload</span>
                                    <span class="flow-arrow">‚Üí</span>
                                    <span class="flow-step">Submit</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="integration-box">
                        <div class="integration-icon">üîÑ</div>
                        <div class="integration-content">
                            <div class="integration-title">Integrasi Dua Mode dalam Satu Sesi</div>
                            <div class="integration-desc">
                                Pengguna dapat beralih antara Mode Informational dan Mode Transactional dalam satu sesi percakapan. 
                                <strong>Intent Classification</strong> secara otomatis mendeteksi mode yang sesuai berdasarkan pertanyaan pengguna.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAYER 3: RAG ENGINE LAYER -->
        <div class="layer-section layer-rag">
            <div class="layer-sidebar">
                RAG Engine Layer
                <span class="layer-number">3</span>
            </div>
            <div class="layer-content">
                <div class="section-title">
                    <span style="font-size: 1.3rem;">ü§ñ</span>
                    <h3>RAG Engine Layer</h3>
                </div>
                <div class="section-desc">
                    Mengelola proses pencarian dan penyusunan jawaban chatbot melalui mekanisme query rewriting berbasis konteks dan metadata, pencarian dokumen menggunakan semantic retrieval pada vector database yang diperkaya dengan penyaringan metadata, penyusunan dan perankingan konteks hasil pencarian, serta integrasi dengan model bahasa besar melalui teknik prompt engineering untuk menghasilkan jawaban yang relevan dan kontekstual.
                </div>
                
                <div class="flow-container">
                    <div class="component">
                        <div class="component-icon">‚úèÔ∏è</div>
                        <div class="component-title">Query Rewriting</div>
                        <div class="component-subtitle">Berbasis Konteks<br/>& Metadata</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-primary">
                        <div class="component-icon">üîç</div>
                        <div class="component-title">Semantic Retrieval</div>
                        <div class="component-subtitle">Cosine Similarity<br/>+ Metadata Filtering</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component">
                        <div class="component-icon">üìä</div>
                        <div class="component-title">Context Ranking</div>
                        <div class="component-subtitle">Penyusunan &<br/>Perankingan</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-highlight">
                        <div class="component-icon">üé®</div>
                        <div class="component-title">Prompt Engineering</div>
                        <div class="component-subtitle">System + Context<br/>+ History + Query</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-dark">
                        <div class="component-icon">üß†</div>
                        <div class="component-title">LLM Integration</div>
                        <div class="component-subtitle">GPT-4o-mini /<br/>Claude 3.5 Sonnet</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-success">
                        <div class="component-icon">üí¨</div>
                        <div class="component-title">Response Generation</div>
                        <div class="component-subtitle">Jawaban + Citation</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAYER 4: DATABASE LAYER -->
        <div class="layer-section layer-database">
            <div class="layer-sidebar">
                Database Layer
                <span class="layer-number">4</span>
            </div>
            <div class="layer-content">
                <div class="section-title">
                    <span style="font-size: 1.3rem;">üóÑÔ∏è</span>
                    <h3>Database Layer</h3>
                </div>
                <div class="section-desc">
                    ChromaDB untuk vector storage dengan metadata filtering, PostgreSQL untuk relational data dan audit trail.
                </div>
                
                <div class="flow-container" style="justify-content: center; gap: 60px;">
                    <div class="db-component">
                        <div class="db-icon-wrapper db-chromadb">
                            <div class="db-emoji">üóÑÔ∏è</div>
                            <div class="db-name">ChromaDB</div>
                        </div>
                        <div class="db-label">Vector Database</div>
                        <div class="process-group" style="margin-top: 10px; background: white;">
                            <div class="mini-process">üî¢ Vector Storage</div>
                            <div class="mini-process">üè∑Ô∏è Metadata Filtering</div>
                            <div class="mini-process">üîç Similarity Search</div>
                        </div>
                    </div>
                    
                    <div class="arrow-bidirectional" style="font-size: 2.5rem;">‚ü∑</div>
                    
                    <div class="db-component">
                        <div class="db-icon-wrapper db-postgresql">
                            <div class="db-emoji">üêò</div>
                            <div class="db-name">PostgreSQL</div>
                        </div>
                        <div class="db-label">Relational Database</div>
                        <div class="process-group" style="margin-top: 10px; background: white;">
                            <div class="mini-process">üìã Relational Data</div>
                            <div class="mini-process">üìù Audit Trail</div>
                            <div class="mini-process">üë§ User Sessions</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAYER 5: PROCESSING PIPELINE LAYER -->
        <div class="layer-section layer-processing">
            <div class="layer-sidebar">
                Processing Pipeline
                <span class="layer-number">5</span>
            </div>
            <div class="layer-content">
                <div class="section-title">
                    <span style="font-size: 1.3rem;">‚ö°</span>
                    <h3>Processing Pipeline Layer</h3>
                </div>
                <div class="section-desc">
                    Melakukan pemrosesan lanjutan terhadap hasil ekstraksi dokumen, termasuk penulisan ulang dan penataan konten secara otomatis untuk membentuk knowledge base yang lebih terstruktur dan mudah dipahami, pemecahan teks dengan skema overlap untuk menjaga kesinambungan konteks, penambahan metadata dokumen seperti sumber, kategori informasi, lokasi atau cabang, jenjang pendidikan, serta periode berlakunya informasi, dan pembentukan representasi vector untuk mendukung pencarian semantik.
                </div>
                
                <div class="flow-container">
                    <div class="component">
                        <div class="component-icon">üìÑ</div>
                        <div class="component-title">Raw Text</div>
                        <div class="component-subtitle">Hasil Ekstraksi</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-warning">
                        <div class="component-icon">‚úçÔ∏è</div>
                        <div class="component-title">AI Rewriting</div>
                        <div class="component-subtitle">Penulisan Ulang &<br/>Penataan Konten</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="flow-vertical">
                        <div class="component">
                            <div class="component-icon">‚úÇÔ∏è</div>
                            <div class="component-title">Text Chunking</div>
                            <div class="component-subtitle">Overlap Scheme</div>
                        </div>
                        <div class="arrow-down">‚Üì</div>
                        <div class="chunks-container">
                            <div class="chunk-item">üìÑ Chunk 1</div>
                            <div class="chunk-item">üìÑ Chunk 2</div>
                            <div class="chunk-item">üìÑ Chunk N</div>
                        </div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="process-group">
                        <div class="process-group-title">Metadata Enrichment</div>
                        <div class="mini-process">üìÅ Sumber Dokumen</div>
                        <div class="mini-process">üìÇ Kategori Informasi</div>
                        <div class="mini-process">üìç Lokasi / Cabang</div>
                        <div class="mini-process">üéì Jenjang Pendidikan</div>
                        <div class="mini-process">üìÖ Periode Berlaku</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="flow-vertical">
                        <div class="component component-highlight">
                            <div class="component-icon">üß†</div>
                            <div class="component-title">Embedding Model</div>
                            <div class="component-subtitle">text-embedding-3-small</div>
                        </div>
                        <div class="arrow-down">‚Üì</div>
                        <div class="embedding-container">
                            <div class="embedding-item">[0.12, 0.45, ...]</div>
                            <div class="embedding-item">[0.33, 0.21, ...]</div>
                            <div class="embedding-item">[0.89, 0.11, ...]</div>
                        </div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="db-component">
                        <div class="db-icon-wrapper db-chromadb" style="width: 70px; height: 75px;">
                            <div class="db-emoji" style="font-size: 1.4rem;">üóÑÔ∏è</div>
                            <div class="db-name" style="font-size: 0.6rem;">ChromaDB</div>
                        </div>
                        <div class="db-label">Vector Storage</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LAYER 6: DATA INGESTION LAYER -->
        <div class="layer-section layer-ingestion">
            <div class="layer-sidebar">
                Data Ingestion
                <span class="layer-number">6</span>
            </div>
            <div class="layer-content">
                <div class="section-title">
                    <span style="font-size: 1.3rem;">üì•</span>
                    <h3>Data Ingestion Layer</h3>
                </div>
                <div class="section-desc">
                    Menangani proses unggah dokumen PDF, ekstraksi teks dari dokumen digital maupun hasil pemindaian menggunakan PDF parser, serta penyimpanan teks mentah dan metadata dokumen ke sistem backend.
                </div>
                
                <div class="flow-container">
                    <div class="component component-danger">
                        <div class="component-icon">üìÑ</div>
                        <div class="component-title">Dokumen PDF</div>
                        <div class="component-subtitle">Digital / Scan</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component">
                        <div class="component-icon">‚¨ÜÔ∏è</div>
                        <div class="component-title">Upload Handler</div>
                        <div class="component-subtitle">File Processing</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="component component-success">
                        <div class="component-icon">üìã</div>
                        <div class="component-title">PDF Parser</div>
                        <div class="component-subtitle">Text Extraction</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="process-group">
                        <div class="process-group-title">Output</div>
                        <div class="mini-process">üìù Raw Text (Teks Mentah)</div>
                        <div class="mini-process">üè∑Ô∏è Metadata Dokumen</div>
                    </div>
                    
                    <div class="arrow">‚Üí</div>
                    
                    <div class="db-component">
                        <div class="db-icon-wrapper db-postgresql" style="width: 70px; height: 75px;">
                            <div class="db-emoji" style="font-size: 1.4rem;">üêò</div>
                            <div class="db-name" style="font-size: 0.6rem;">PostgreSQL</div>
                        </div>
                        <div class="db-label">Backend Storage</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-title">
                <span>üìñ</span> Legenda Komponen Arsitektur
            </div>
            <div class="legend-grid">
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #6366f1, #4f46e5);"></div>
                    <span>Presentation Layer - User Interface</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></div>
                    <span>Application Layer - Backend Logic</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);"></div>
                    <span>RAG Engine Layer - AI Processing</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #ec4899, #db2777);"></div>
                    <span>Database Layer - Data Storage</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></div>
                    <span>Processing Pipeline - Data Transformation</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: linear-gradient(135deg, #10b981, #059669);"></div>
                    <span>Data Ingestion Layer - Input Processing</span>
                </div>
                <div class="legend-item">
                    <span style="font-size: 1.2rem; color: #94a3b8;">‚Üí</span>
                    <span>Alur Data / Proses</span>
                </div>
                <div class="legend-item">
                    <span style="font-size: 1.2rem; color: #94a3b8;">‚ü∑</span>
                    <span>Komunikasi Dua Arah</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-main">Gambar 3.X ‚Äî Arsitektur Sistem Chatbot Berbasis LLM dengan Retrieval Augmented Generation (RAG)</div>
            <div class="footer-sub">BAB III Metodologi Penelitian ‚Ä¢ Sistem Chatbot YPI Al-Azhar Jakarta ‚Ä¢ 6-Layer Microservices Architecture</div>
        </div>
    </div>
</body>
</html>